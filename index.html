<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atari Style Space Invaders</title>
  <style>
    body {
      margin: 0;
      background-color: black;
      font-family: monospace;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      height: 100vh;
      overflow: hidden;
    }#scoreBoard {
  font-size: 1.5em;
  margin: 1em 0;
  text-align: center;
}

canvas {
  width: 100vw;
  max-width: 800px;
  height: auto;
  background-color: black;
  border: 2px solid white;
}

.touch-controls {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.touch-button, #soundToggle, #fullscreenToggle {
  padding: 10px 20px;
  font-size: 1em;
  margin: 5px;
  border-radius: 5px;
  border: none;
  background-color: white;
  color: black;
  cursor: pointer;
}

@media (max-width: 600px) {
  #scoreBoard {
    font-size: 1.2em;
  }

  .touch-button, #soundToggle, #fullscreenToggle {
    padding: 8px 16px;
    font-size: 0.9em;
  }
}

@media (min-width: 1200px) {
  canvas {
    max-width: 1000px;
  }
}

  </style>
</head>
<body>
  <div id="scoreBoard">Score: 0 | Level: 1 | Lives: 3</div>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <button id="soundToggle">Toggle Sound</button>
  <button id="fullscreenToggle">Fullscreen</button>
  <div class="touch-controls">
    <button class="touch-button" id="leftBtn">◀</button>
    <button class="touch-button" id="fireBtn">⦿</button>
    <button class="touch-button" id="rightBtn">▶</button>
  </div>  <script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const scoreBoard = document.getElementById("scoreBoard");
const leftBtn = document.getElementById("leftBtn");
const rightBtn = document.getElementById("rightBtn");
const fireBtn = document.getElementById("fireBtn");
const soundToggle = document.getElementById("soundToggle");
const fullscreenToggle = document.getElementById("fullscreenToggle");

let score = 0;
let level = 1;
let lives = 3;
let gameOver = false;
let soundOn = true;

let ship = {
  x: canvas.width / 2 - 20,
  y: canvas.height - 40,
  width: 40,
  height: 20,
  speed: 5,
};

let bullets = [];
let powerUps = [];
let enemies = [];
let keys = {};

let shootSound = new Audio("https://freesound.org/data/previews/331/331912_3248244-lq.mp3");
let hitSound = new Audio("https://freesound.org/data/previews/137/137060_2428254-lq.mp3");
let powerSound = new Audio("https://freesound.org/data/previews/341/341695_3248244-lq.mp3");

function createEnemies(rows, cols) {
  enemies = [];
  for (let i = 0; i < rows; i++) {
    for (let j = 0; j < cols; j++) {
      enemies.push({
        x: 60 + j * 60,
        y: 30 + i * 40,
        width: 40,
        height: 20,
        alive: true,
        type: i === 0 && j === Math.floor(cols / 2) ? 'boss' : 'normal'
      });
    }
  }
}

function spawnPowerUp(x, y) {
  powerUps.push({ x: x, y: y, width: 20, height: 20, type: "life" });
}

createEnemies(5, 10);

document.addEventListener("keydown", (e) => {
  keys[e.key] = true;
  if (e.key === " ") shoot();
});
document.addEventListener("keyup", (e) => delete keys[e.key]);

soundToggle.addEventListener("click", () => {
  soundOn = !soundOn;
  soundToggle.textContent = soundOn ? "Toggle Sound" : "Sound Off";
});

fullscreenToggle.addEventListener("click", () => {
  const elem = document.documentElement;
  if (!document.fullscreenElement) {
    elem.requestFullscreen().catch(err => alert(`Error attempting fullscreen: ${err.message}`));
  } else {
    document.exitFullscreen();
  }
});

function shoot() {
  bullets.push({ x: ship.x + ship.width / 2 - 2, y: ship.y, width: 4, height: 10 });
  if (soundOn) {
    shootSound.currentTime = 0;
    shootSound.play();
  }
}

leftBtn.addEventListener("touchstart", () => keys['ArrowLeft'] = true);
leftBtn.addEventListener("touchend", () => delete keys['ArrowLeft']);
rightBtn.addEventListener("touchstart", () => keys['ArrowRight'] = true);
rightBtn.addEventListener("touchend", () => delete keys['ArrowRight']);
fireBtn.addEventListener("touchstart", shoot);

function update() {
  if (gameOver) return;

  if (keys["ArrowLeft"] && ship.x > 0) ship.x -= ship.speed;
  if (keys["ArrowRight"] && ship.x < canvas.width - ship.width) ship.x += ship.speed;

  bullets = bullets.filter((b) => b.y > 0);
  bullets.forEach((b) => (b.y -= 10));

  powerUps.forEach((p) => p.y += 3);
  powerUps = powerUps.filter(p => p.y < canvas.height);

  powerUps.forEach((p, i) => {
    if (p.x < ship.x + ship.width && p.x + p.width > ship.x &&
        p.y < ship.y + ship.height && p.y + p.height > ship.y) {
      if (p.type === "life") {
        lives++;
        if (soundOn) powerSound.play();
        powerUps.splice(i, 1);
      }
    }
  });

  bullets.forEach((b) => {
    enemies.forEach((e) => {
      if (
        e.alive &&
        b.x < e.x + e.width &&
        b.x + b.width > e.x &&
        b.y < e.y + e.height &&
        b.y + b.height > e.y
      ) {
        if (e.type === 'boss') {
          e.health = (e.health || 3) - 1;
          if (e.health <= 0) e.alive = false;
        } else {
          e.alive = false;
        }
        if (Math.random() < 0.1) spawnPowerUp(e.x + e.width / 2, e.y + e.height);
        b.y = -10;
        score += e.type === 'boss' ? 50 : 10;
        if (soundOn) {
          hitSound.currentTime = 0;
          hitSound.play();
        }
      }
    });
  });

  if (enemies.some(e => e.alive && e.y + e.height > ship.y)) {
    lives--;
    if (lives <= 0) {
      gameOver = true;
      scoreBoard.textContent = `GAME OVER - Final Score: ${score}`;
      return;
    } else {
      createEnemies(5, 10);
    }
  }

  if (enemies.every(e => !e.alive)) {
    level++;
    ship.speed += 0.5;
    createEnemies(5, 10);
  }

  scoreBoard.textContent = `Score: ${score} | Level: ${level} | Lives: ${lives}`;
}

function drawShip() {
  ctx.fillStyle = "lime";
  ctx.fillRect(ship.x, ship.y, ship.width, ship.height);
}

function drawBullets() {
  ctx.fillStyle = "white";
  bullets.forEach((b) => ctx.fillRect(b.x, b.y, b.width, b.height));
}

function drawEnemies() {
  enemies.forEach((e) => {
    if (e.alive) {
      ctx.fillStyle = e.type === 'boss' ? 'purple' : 'red';
      ctx.fillRect(e.x, e.y, e.width, e.height);
    }
  });
}

function drawPowerUps() {
  ctx.fillStyle = 'yellow';
  powerUps.forEach(p => ctx.fillRect(p.x, p.y, p.width, p.height));
}

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  update();
  drawShip();
  drawBullets();
  drawEnemies();
  drawPowerUps();
  if (!gameOver) requestAnimationFrame(gameLoop);
}

gameLoop();
</script></body>
</html>